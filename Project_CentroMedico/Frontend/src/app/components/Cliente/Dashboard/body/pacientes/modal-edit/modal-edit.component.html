<div class="modal-backdrop" *ngIf="isVisible">
    <div class="modal-content">
        <div class="modal-header">
            <h2>{{ modalTitle }}</h2> <i class="bi bi-x-circle close-button" (click)="close()"></i>
        </div>
        <div> 
            <form [formGroup]="pacienteForm" (ngSubmit)="onSubmit()"> <div id="contenedor-principal">
                    <div id="columnas">
                        <div id="primer-contenedor">
                            <input type="hidden" formControlName="id">

                            <div>
                                <label for="nombre">Nombre:</label>
                                <input type="text" id="nombre" formControlName="nombre"/>
                                <div *ngIf="pacienteForm.get('nombre')?.invalid && pacienteForm.get('nombre')?.touched" class="text-danger">
                                    <div *ngIf="pacienteForm.get('nombre')?.errors?.['required']">El nombre es obligatorio.</div>
                                </div>
                            </div>
                            <div>
                                <label for="apellidos">Apellidos:</label>
                                <input type="text" id="apellidos" formControlName="apellidos"/>
                                <div *ngIf="pacienteForm.get('apellidos')?.invalid && pacienteForm.get('apellidos')?.touched" class="text-danger">
                                    <div *ngIf="pacienteForm.get('apellidos')?.errors?.['required']">Los apellidos son obligatorios.</div>
                                </div>
                            </div>
                            <div>
                                <label for="dni">DNI:</label>
                                <input type="text" id="dni" formControlName="dni"/>
                                <div *ngIf="pacienteForm.get('dni')?.invalid && pacienteForm.get('dni')?.touched" class="text-danger">
                                    <div *ngIf="pacienteForm.get('dni')?.errors?.['required']">El DNI es obligatorio.</div>
                                    <div *ngIf="pacienteForm.get('dni')?.errors?.['pattern']">El formato del DNI no es válido.</div>
                                </div>
                            </div>
                            <div>
                                <label for="fecha_nacimiento">Fecha de nacimiento:</label>
                                <input type="date" id="fecha_nacimiento" formControlName="fecha_nacimiento"/>
                                <div *ngIf="pacienteForm.get('fecha_nacimiento')?.invalid && pacienteForm.get('fecha_nacimiento')?.touched" class="text-danger">
                                    <div *ngIf="pacienteForm.get('fecha_nacimiento')?.errors?.['required']">La fecha de nacimiento es obligatoria.</div>
                                </div>
                            </div>
                        </div>
                        <div id="segundo-contenedor">
                            <div>
                                <label for="email">Email:</label>
                                <input type="text" id="email" formControlName="email"/>
                                <div *ngIf="pacienteForm.get('email')?.invalid && pacienteForm.get('email')?.touched" class="text-danger">
                                    <div *ngIf="pacienteForm.get('email')?.errors?.['required']">El email es obligatorio.</div>
                                    <div *ngIf="pacienteForm.get('email')?.errors?.['email']">El formato del email no es válido.</div>
                                </div>
                            </div>
                            <div>
                                <label for="password">Contraseña:</label>
                                <input type="password" id="password" formControlName="password"/>
                                <div *ngIf="pacienteForm.get('password')?.invalid && pacienteForm.get('password')?.touched" class="text-danger">
                                    <div *ngIf="pacienteForm.get('password')?.errors?.['required'] && !isEditMode">La contraseña es obligatoria.</div>
                                    <div *ngIf="pacienteForm.get('password')?.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres.</div>
                                    <div *ngIf="isEditMode && pacienteForm.get('password')?.value === ''">Dejar vacío si no deseas cambiar la contraseña.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="boton-registrar">
                        <button type="submit" id="registrar">{{ isEditMode ? 'Guardar Cambios' : 'Registrar' }}</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>