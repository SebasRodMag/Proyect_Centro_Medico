<div class="modal-backdrop" *ngIf="isVisible">
    <div class="modal-content">
        <div class="modal-header">
            <!-- El título del modal es "REGISTRAR EMPLEADO" en tu HTML, pero el TS es de "Paciente" -->
            <!-- Sugiero usar "REGISTRAR PACIENTE" para consistencia -->
            <h2>REGISTRAR PACIENTE</h2>
            <i class="bi bi-x-circle close-button" (click)="close()"></i>
        </div>
        <div>
            <!-- Usar [formGroup] para enlazar con el FormGroup del TS -->
            <form [formGroup]="pacienteForm" (ngSubmit)="onSubmit()">
                <div id="contenedor-principal">
                    <div id="columnas">
                        <!-- Primera Columna -->
                        <div id="primer-contenedor">
                            <div class="form-field-group">
                                <mat-form-field appearance="fill" class="full-width">
                                    <mat-label>Nombre:</mat-label>
                                    <input matInput type="text" formControlName="nombre" />
                                    <mat-error
                                        *ngIf="pacienteForm.get('nombre')?.invalid && pacienteForm.get('nombre')?.touched">
                                        El nombre es obligatorio.
                                    </mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-field-group">
                                <mat-form-field appearance="fill" class="full-width">
                                    <mat-label>Apellidos:</mat-label>
                                    <input matInput type="text" formControlName="apellidos" />
                                    <mat-error
                                        *ngIf="pacienteForm.get('apellidos')?.invalid && pacienteForm.get('apellidos')?.touched">
                                        Los apellidos son obligatorios.
                                    </mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-field-group">
                                <mat-form-field appearance="fill" class="full-width">
                                    <mat-label>DNI:</mat-label>
                                    <input matInput type="text" formControlName="dni" />
                                    <mat-error
                                        *ngIf="pacienteForm.get('dni')?.invalid && pacienteForm.get('dni')?.touched">
                                        <span *ngIf="pacienteForm.get('dni')?.errors?.['required']">El DNI es
                                            obligatorio.</span>
                                        <span *ngIf="pacienteForm.get('dni')?.errors?.['pattern']">Formato de DNI
                                            inválido.</span>
                                    </mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-field-group">
                                <mat-form-field appearance="fill" class="full-width">
                                    <mat-label>Fecha de nacimiento:</mat-label>
                                    <input matInput [matDatepicker]="pickerNacimiento"
                                        formControlName="fecha_nacimiento" />
                                    <mat-datepicker-toggle matSuffix [for]="pickerNacimiento"></mat-datepicker-toggle>
                                    <mat-datepicker #pickerNacimiento></mat-datepicker>
                                    <mat-error
                                        *ngIf="pacienteForm.get('fecha_nacimiento')?.invalid && pacienteForm.get('fecha_nacimiento')?.touched">
                                        La fecha de nacimiento es obligatoria.
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>

                        <!-- Segunda Columna -->
                        <div id="segundo-contenedor">
                            <div class="form-field-group">
                                <mat-form-field appearance="fill" class="full-width">
                                    <mat-label>Email:</mat-label>
                                    <input matInput type="email" formControlName="email" />
                                    <mat-error
                                        *ngIf="pacienteForm.get('email')?.invalid && pacienteForm.get('email')?.touched">
                                        <span *ngIf="pacienteForm.get('email')?.errors?.['required']">El email es
                                            obligatorio.</span>
                                        <span *ngIf="pacienteForm.get('email')?.errors?.['email']">Introduce un email
                                            válido.</span>
                                    </mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-field-group">
                                <mat-form-field appearance="fill" class="full-width">
                                    <mat-label>Contraseña:</mat-label>
                                    <input matInput [type]="mostrarPassword ? 'text' : 'password'"
                                        formControlName="password" />
                                    <button mat-icon-button matSuffix (click)="mostrarPassword = !mostrarPassword"
                                        type="button">
                                        <mat-icon>{{ mostrarPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
                                    </button>
                                    <mat-error
                                        *ngIf="pacienteForm.get('password')?.invalid && pacienteForm.get('password')?.touched">
                                        <span *ngIf="pacienteForm.get('password')?.errors?.['required']">La contraseña
                                            es obligatoria.</span>
                                        <span *ngIf="pacienteForm.get('password')?.errors?.['minlength']">Mínimo 6
                                            caracteres.</span>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    <div id="boton-registrar">
                        <button type="submit" id="registrar" [disabled]="pacienteForm.invalid">
                            Registrar
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>