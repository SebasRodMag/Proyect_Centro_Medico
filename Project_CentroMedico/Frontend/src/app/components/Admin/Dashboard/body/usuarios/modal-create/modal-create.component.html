<div class="modal-backdrop" *ngIf="isVisible">
    <div class="modal-content">
        <div class="modal-header">
            <h2>{{ isEditMode ? 'EDITAR' : 'REGISTRAR' }} USUARIO</h2>
            <i class="bi bi-x-circle close-button" (click)="close()"></i>
        </div>
        <div>
            <form [formGroup]="userForm" (ngSubmit)="crearUsuario()">
                <div id="contenedor-principal">
                    <div id="columnas">
                        <div id="primer-contenedor">
                            <div class="form-field-group">
                                <mat-form-field appearance="fill" class="full-width">
                                    <mat-label>Email:</mat-label>
                                    <input matInput type="email" formControlName="email" />
                                    <mat-error *ngIf="userForm.get('email')?.invalid && userForm.get('email')?.touched">
                                        <span *ngIf="userForm.get('email')?.errors?.['required']">El email es
                                            obligatorio.</span>
                                        <span *ngIf="userForm.get('email')?.errors?.['email']">Introduce un email
                                            válido.</span>
                                    </mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-field-group">
                                <mat-form-field appearance="fill" class="full-width">
                                    <mat-label>Contraseña:</mat-label>
                                    <input matInput [type]="mostrarPassword ? 'text' : 'password'"
                                        formControlName="password" />
                                    <button mat-icon-button matSuffix (click)="mostrarPassword = !mostrarPassword"
                                        type="button">
                                        <mat-icon>{{ mostrarPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
                                    </button>
                                    <mat-error
                                        *ngIf="userForm.get('password')?.invalid && userForm.get('password')?.touched">
                                        <span *ngIf="userForm.get('password')?.errors?.['required']">La contraseña es
                                            obligatoria.</span>
                                        <span *ngIf="userForm.get('password')?.errors?.['minlength']">Mínimo 6
                                            caracteres.</span>
                                    </mat-error>
                                </mat-form-field>
                            </div>

                            <div class="form-field-group">
                                <mat-form-field appearance="fill" class="full-width">
                                    <mat-label>Rol:</mat-label>
                                    <mat-select formControlName="rol">
                                        <mat-option value="Administrador">Administrador</mat-option>
                                        <mat-option value="Medico">Médico</mat-option>
                                        <mat-option value="Cliente">Cliente</mat-option>
                                        <mat-option value="Paciente">Paciente</mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="userForm.get('rol')?.invalid && userForm.get('rol')?.touched">
                                        El rol es obligatorio.
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>

                    <div id="boton-registrar">
                        <button type="submit" id="registrar" [disabled]="userForm.invalid">
                            {{ isEditMode ? 'Actualizar' : 'Registrar' }}
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>